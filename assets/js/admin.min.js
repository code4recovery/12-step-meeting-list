!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw s}}}}var o=86400,l={bubbles:!0,cancelable:!1,detail:null};function c(e,t){return e==o&&t.show2400?e:e%o}var u,d={appendTo:"body",className:null,closeOnWindow:!1,closeOnScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,lang:{},listWidth:null,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(e,t){if(null===e)return null;for(var i=0,n=0;n<e;)i++,n+=60*t.step(i);var a=n-60*t.step(i-1);return c(e-a<n-e?a:n,t)},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0},m={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},p=function(){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this._handleFormatValue=this._handleFormatValue.bind(this),this._handleKeyUp=this._handleKeyUp.bind(this),this.targetEl=e;var n=i.extractAttrOptions(e,Object.keys(d));this.settings=this.parseSettings(a(a(a({},d),t),n))}var n,r,c;return n=i,c=[{key:"extractAttrOptions",value:function(e,t){var i,n={},a=s(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;r in e.dataset&&(n[r]=e.dataset[r])}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"isVisible",value:function(e){var t=e[0];return t.offsetWidth>0&&t.offsetHeight>0}},{key:"hideAll",value:function(){var e,t=s(document.getElementsByClassName("ui-timepicker-input"));try{for(t.s();!(e=t.n()).done;){var i=e.value.timepickerObj;i&&i.hideMe()}}catch(e){t.e(e)}finally{t.f()}}}],(r=[{key:"hideMe",value:function(){if(this.settings.useSelect)this.targetEl.blur();else if(this.list&&i.isVisible(this.list)){this.settings.selectOnBlur&&this._selectValue(),this.list.hide();var e=new CustomEvent("hideTimepicker",l);this.targetEl.dispatchEvent(e)}}},{key:"_findRow",value:function(e){if(!e&&0!==e)return!1;var t=!1;return e=this.settings.roundingFunction(e,this.settings),!!this.list&&(this.list.find("li").each((function(i,n){var a=parseInt(n.dataset.time);if(!isNaN(a))return a==e?(t=n,!1):void 0})),t)}},{key:"_hideKeyboard",value:function(){return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.settings.disableTouchKeyboard}},{key:"_setTimeValue",value:function(e,t){if("INPUT"===this.targetEl.nodeName){null===e&&""==this.targetEl.value||(this.targetEl.value=e);var i=this;i.settings.useSelect&&"select"!=t&&i.list&&i.list.val(i._roundAndFormatTime(i.anytime2int(e)))}var n=new CustomEvent("selectTime",l);if(this.selectedValue!=e){this.selectedValue=e;var a=new CustomEvent("changeTime",l),r=new CustomEvent("change",Object.assign(l,{detail:"timepicker"}));return"select"==t?(this.targetEl.dispatchEvent(n),this.targetEl.dispatchEvent(a),this.targetEl.dispatchEvent(r)):-1==["error","initial"].indexOf(t)&&this.targetEl.dispatchEvent(a),!0}return-1==["error","initial"].indexOf(t)&&this.targetEl.dispatchEvent(n),!1}},{key:"_getTimeValue",value:function(){return"INPUT"===this.targetEl.nodeName?this.targetEl.value:this.selectedValue}},{key:"_selectValue",value:function(){var e=this;e.settings;var t=e.list.find(".ui-timepicker-selected");if(t.hasClass("ui-timepicker-disabled"))return!1;if(!t.length)return!0;var i=t.get(0).dataset.time;if(i){var n=parseInt(i);isNaN(n)||(i=n)}return null!==i&&("string"!=typeof i&&(i=e._int2time(i)),e._setTimeValue(i,"select")),!0}},{key:"anytime2int",value:function(t){return"number"==typeof t?t:"string"==typeof t?this.time2int(t):"object"===e(t)&&t instanceof Date?3600*t.getHours()+60*t.getMinutes()+t.getSeconds():"function"==typeof t?t():null}},{key:"time2int",value:function(e){if(""===e||null==e)return null;if("now"===e)return this.anytime2int(new Date);if("string"!=typeof e)return e;e=e.toLowerCase().replace(/[\s\.]/g,""),"am"!==this.settings.lang.am||"a"!=e.slice(-1)&&"p"!=e.slice(-1)||(e+="m");var t=/^(([^0-9]*))?([0-9]?[0-9])(([0-5][0-9]))?(([0-5][0-9]))?(([^0-9]*))$/;e.match(/\W/)&&(t=/^(([^0-9]*))?([0-9]?[0-9])(\W+([0-5][0-9]?))?(\W+([0-5][0-9]))?(([^0-9]*))$/);var i=e.match(t);if(!i)return null;var n=parseInt(1*i[3],10),a=i[2]||i[9],r=this.parseMinuteString(i[5]),s=1*i[7]||0;a||2!=i[3].length||"0"!=i[3][0]||(a="am"),n>24&&!r&&(n=1*i[3][0],r=this.parseMinuteString(i[3][1]));var l=n;if(n<=12&&a){var c=(a=a.trim())==this.settings.lang.pm||a==this.settings.lang.PM;l=12==n?c?12:0:n+(c?12:0)}else if(3600*n+60*r+s>=o+(this.settings.show2400?1:0)){if(!1===this.settings.wrapHours)return null;l=n%24}var u=3600*l+60*r+s;if(n<12&&!a&&this.settings._twelveHourTime&&this.settings.scrollDefault()){var d=u-this.settings.scrollDefault();d<0&&d>=-43200&&(u=(u+43200)%o)}return u}},{key:"parseMinuteString",value:function(e){e||(e=0);var t=1;return 1==e.length&&(t=10),parseInt(e)*t||0}},{key:"intStringDateOrFunc2func",value:function(e){var t=this;return null==e?function(){return null}:"function"==typeof e?function(){return t.anytime2int(e())}:function(){return t.anytime2int(e)}}},{key:"parseSettings",value:function(e){if(e.lang=a(a({},m),e.lang),this.settings=e,e.listWidth&&(e.listWidth=this.anytime2int(e.listWidth)),e.minTime=this.intStringDateOrFunc2func(e.minTime),e.maxTime=this.intStringDateOrFunc2func(e.maxTime),e.durationTime=this.intStringDateOrFunc2func(e.durationTime),e.scrollDefault?e.scrollDefault=this.intStringDateOrFunc2func(e.scrollDefault):e.scrollDefault=e.minTime,"string"==typeof e.timeFormat&&e.timeFormat.match(/[gh]/)&&(e._twelveHourTime=!0),"function"!=typeof e.step){var t=e.step;e.step=function(){return t}}return e.disableTimeRanges=this._parseDisableTimeRanges(e.disableTimeRanges),e.closeOnWindowScroll&&!e.closeOnScroll&&(e.closeOnScroll=e.closeOnWindowScroll),!0===e.closeOnScroll&&(e.closeOnScroll=window.document),e}},{key:"_parseDisableTimeRanges",value:function(e){if(!e||0==e.length)return[];for(var t in e)e[t]=[this.anytime2int(e[t][0]),this.anytime2int(e[t][1])];for(t=(e=e.sort((function(e,t){return e[0]-t[0]}))).length-1;t>0;t--)e[t][0]<=e[t-1][1]&&(e[t-1]=[Math.min(e[t][0],e[t-1][0]),Math.max(e[t][1],e[t-1][1])],e.splice(t,1));return e}},{key:"_disableTextInputHandler",value:function(e){switch(e.keyCode){case 13:case 9:return;default:e.preventDefault()}}},{key:"_int2duration",value:function(e,t){e=Math.abs(e);var i,n,a=Math.round(e/60),r=[];return a<60?r=[a,this.settings.lang.mins]:(i=Math.floor(a/60),n=a%60,30==t&&30==n&&(i+=this.settings.lang.decimal+5),r.push(i),r.push(1==i?this.settings.lang.hr:this.settings.lang.hrs),30!=t&&n&&(r.push(n),r.push(this.settings.lang.mins))),r.join(" ")}},{key:"_roundAndFormatTime",value:function(e){if(null!==(e=this.settings.roundingFunction(e,this.settings)))return this._int2time(e)}},{key:"_int2time",value:function(e){if("number"!=typeof e)return null;var t=parseInt(e%60),i=parseInt(e/60%60),n=parseInt(e/3600%24),a=new Date(1970,0,2,n,i,t,0);if(isNaN(a.getTime()))return null;if("function"==typeof this.settings.timeFormat)return this.settings.timeFormat(a);for(var r,s,l="",c=0;c<this.settings.timeFormat.length;c++)switch(s=this.settings.timeFormat.charAt(c)){case"a":l+=a.getHours()>11?this.settings.lang.pm:this.settings.lang.am;break;case"A":l+=a.getHours()>11?this.settings.lang.PM:this.settings.lang.AM;break;case"g":l+=0==(r=a.getHours()%12)?"12":r;break;case"G":r=a.getHours(),e===o&&(r=this.settings.show2400?24:0),l+=r;break;case"h":0!=(r=a.getHours()%12)&&r<10&&(r="0"+r),l+=0===r?"12":r;break;case"H":r=a.getHours(),e===o&&(r=this.settings.show2400?24:0),l+=r>9?r:"0"+r;break;case"i":l+=(i=a.getMinutes())>9?i:"0"+i;break;case"s":l+=(t=a.getSeconds())>9?t:"0"+t;break;case"\\":c++,l+=this.settings.timeFormat.charAt(c);break;default:l+=s}return l}},{key:"_setSelected",value:function(){var e=this.list;e.find("li").removeClass("ui-timepicker-selected");var t=this.anytime2int(this._getTimeValue());if(null!==t){var i=this._findRow(t);if(i){var n=i.getBoundingClientRect(),a=e.get(0).getBoundingClientRect(),r=n.top-a.top;if(r+n.height>a.height||r<0){var s=e.scrollTop()+(n.top-a.top)-n.height;e.scrollTop(s)}var o=parseInt(i.dataset.time);(this.settings.forceRoundTime||o===t)&&i.classList.add("ui-timepicker-selected")}}}},{key:"_isFocused",value:function(e){return e===document.activeElement}},{key:"_handleFormatValue",value:function(e){e&&"timepicker"==e.detail||this._formatValue(e)}},{key:"_formatValue",value:function(e,t){if(""!==this.targetEl.value){if(!this._isFocused(this.targetEl)||e&&"change"==e.type){var i=this.settings,n=this.anytime2int(this.targetEl.value);if(null!==n){var a=this._isTimeRangeError(n,i);if(i.forceRoundTime){var r=i.roundingFunction(n,i);r!=n&&(n=r,t=null)}var s=this._int2time(n);if(a){this._setTimeValue(s);var o=new CustomEvent("timeRangeError",l);this.targetEl.dispatchEvent(o)}else this._setTimeValue(s,t)}else{var c=new CustomEvent("timeFormatError",l);this.targetEl.dispatchEvent(c)}}}else this._setTimeValue(null,t)}},{key:"_isTimeRangeError",value:function(e,t){if(null!==t.minTime&&null!==t.maxTime&&(e<t.minTime()||e>t.maxTime()))return!0;var i,n=s(t.disableTimeRanges);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(e>=a[0]&&e<a[1])return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"_generateNoneElement",value:function(t,i){var n,a,r,s;return"object"==e(t)?(n=t.label,a=t.className,r=t.value):"string"==typeof t?(n=t,r=""):$.error("Invalid noneOption value"),i?(s=document.createElement("option")).value=r:(s=document.createElement("li")).dataset.time=String(r),s.innerText=n,s.classList.add(a),s}},{key:"_handleKeyUp",value:function(e){var t=this;if(!this.list||!i.isVisible(this.list)||this.settings.disableTextInput)return!0;if("paste"!==e.type&&"cut"!==e.type)switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:this.settings.typeaheadHighlight?this._setSelected():this.list.hide()}else setTimeout((function(){t.settings.typeaheadHighlight?t._setSelected():t.list.hide()}),0)}}])&&t(n.prototype,r),c&&t(n,c),i}();function h(t){return Array.isArray(t)?t.map(h):!0===t?{label:"None",value:""}:"object"===e(t)?t:{label:t,value:""}}function f(e){var t=document.createElement("option");return t.value=e.value||e.label,e.duration?t.appendChild(document.createTextNode(e.label+" ("+e.duration+")")):t.appendChild(document.createTextNode(e.label)),e.disabled&&(t.disabled=!0),t}function g(e){var t=document.createElement("li");if(t.dataset.time=e.value,e.className&&t.classList.add(e.className),t.className=e.className,t.appendChild(document.createTextNode(e.label)),e.duration){var i=document.createElement("span");i.appendChild(document.createTextNode("("+e.duration+")")),i.classList.add("ui-timepicker-duration"),t.appendChild(i)}return e.disabled&&t.classList.add("ui-timepicker-disabled"),t}function v(e){var t,i=[].concat(function(e){if(!e.noneOption)return[];var t=h(e.noneOption);return Array.isArray(e.noneOption)?t:[t]}(e.settings),function(e){var t,i,n=e.settings,a=null!==(t=n.minTime())&&void 0!==t?t:0,r=null!==(i=n.maxTime())&&void 0!==i?i:a+o-1;r<a&&(r+=o),86399===r&&"string"==typeof n.timeFormat&&n.show2400&&(r=o);for(var l=[],u=a,d=0;u<=r;d++,u+=60*n.step(d)){var m=u,p=e._int2time(m),h=m%o<43200?"ui-timepicker-am":"ui-timepicker-pm",f={label:p,value:c(m,n),className:h};if((null!==n.minTime()||null!==n.durationTime())&&n.showDuration){var g,v=null!==(g=n.durationTime())&&void 0!==g?g:n.minTime();v>u&&(v-=o);var _=e._int2duration(u-v,n.step());f.duration=_}var y,b=s(n.disableTimeRanges);try{for(b.s();!(y=b.n()).done;){var k=y.value;if(m%o>=k[0]&&m%o<k[1]){f.disabled=!0;break}}}catch(e){b.e(e)}finally{b.f()}l.push(f)}return l}(e));if(t=e.settings.useSelect?function(e,t){var i=document.createElement("select");i.classList.add("ui-timepicker-select"),t&&(i.name="ui-timepicker-"+t);var n,a=s(e);try{for(a.s();!(n=a.n()).done;){var r=f(n.value);i.appendChild(r)}}catch(e){a.e(e)}finally{a.f()}return i}(i,e.targetEl.name):function(e){var t=document.createElement("ul");t.classList.add("ui-timepicker-list");var i,n=s(e);try{for(n.s();!(i=n.n()).done;){var a=g(i.value);t.appendChild(a)}}catch(e){n.e(e)}finally{n.f()}var r=document.createElement("div");return r.classList.add("ui-timepicker-wrapper"),r.tabIndex=-1,r.style.display="none",r.style.position="absolute",r.appendChild(t),r}(i),e.settings.className){var n,a=s(e.settings.className.split(" "));try{for(a.s();!(n=a.n()).done;){var r=n.value;t.classList.add(r)}}catch(e){a.e(e)}finally{a.f()}}return!e.settings.showDuration||null===e.settings.minTime&&null===e.settings.durationTime||(t.classList.add("ui-timepicker-with-duration"),t.classList.add("ui-timepicker-step-"+e.settings.step())),t}!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t||(t={}),t=Object.assign(l,t);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}(),u=function(t){var i={init:function(e){return this.each((function(){var a=t(this),s=new p(this,e),o=s.settings;if(o.lang,this.timepickerObj=s,a.addClass("ui-timepicker-input"),o.useSelect)n(a);else{if(a.prop("autocomplete","off"),o.showOn)for(var l in o.showOn)a.on(o.showOn[l]+".timepicker",i.show);a.on("change.timepicker",s._handleFormatValue),a.on("keydown.timepicker",r),a.on("keyup.timepicker",s._handleKeyUp),o.disableTextInput&&a.on("keydown.timepicker",s._disableTextInputHandler),a.on("cut.timepicker",s._handleKeyUp),a.on("paste.timepicker",s._handleKeyUp),s._formatValue(null,"initial")}}))},show:function(e){var i=t(this),r=i[0].timepickerObj,s=r.settings;if(e&&e.preventDefault(),s.useSelect)r.list.trigger("focus");else{r._hideKeyboard()&&i.trigger("blur");var o=r.list;if(!i.prop("readonly")&&(n(i),o=r.list,!p.isVisible(o))){i.is("input")&&(r.selectedValue=i.val()),r._setSelected(),p.hideAll(),"number"==typeof s.listWidth&&o.width(i.outerWidth()*s.listWidth),o.show();var l={};s.orientation.match(/r/)?l.left=i.offset().left+i.outerWidth()-o.outerWidth()+parseInt(o.css("marginLeft").replace("px",""),10):s.orientation.match(/l/)?l.left=i.offset().left+parseInt(o.css("marginLeft").replace("px",""),10):s.orientation.match(/c/)&&(l.left=i.offset().left+(i.outerWidth()-o.outerWidth())/2+parseInt(o.css("marginLeft").replace("px",""),10)),"t"==(s.orientation.match(/t/)?"t":s.orientation.match(/b/)?"b":i.offset().top+i.outerHeight(!0)+o.outerHeight()>t(window).height()+t(window).scrollTop()?"t":"b")?(o.addClass("ui-timepicker-positioned-top"),l.top=i.offset().top-o.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)):(o.removeClass("ui-timepicker-positioned-top"),l.top=i.offset().top+i.outerHeight()+parseInt(o.css("marginTop").replace("px",""),10)),o.offset(l);var c=o.find(".ui-timepicker-selected");if(!c.length){var u=r.anytime2int(r._getTimeValue());null!==u?c=t(r._findRow(u)):s.scrollDefault()&&(c=t(r._findRow(s.scrollDefault())))}if(c.length&&!c.hasClass("ui-timepicker-disabled")||(c=o.find("li:not(.ui-timepicker-disabled):first")),c&&c.length){var d=o.scrollTop()+c.position().top-c.outerHeight();o.scrollTop(d)}else o.scrollTop(0);return s.stopScrollPropagation&&t(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",(function(e){e.preventDefault();var i=t(this).scrollTop();t(this).scrollTop(i+e.originalEvent.deltaY)})),t(document).on("mousedown.ui-timepicker",a),window.addEventListener("resize",a),s.closeOnScroll&&t(s.closeOnScroll).on("scroll.ui-timepicker",a),i.trigger("showTimepicker"),this}}},hide:function(e){var t=this[0].timepickerObj;return t&&t.hideMe(),p.hideAll(),this},option:function(i,a){return"string"==typeof i&&void 0===a?this[0].timepickerObj.settings[i]:this.each((function(){var r=t(this),s=r[0].timepickerObj,o=s.settings,l=s.list;"object"==e(i)?o=t.extend(o,i):"string"==typeof i&&(o[i]=a),o=s.parseSettings(o),s.settings=o,s._formatValue({type:"change"},"initial"),l&&(l.remove(),s.list=null),o.useSelect&&n(r)}))},getSecondsFromMidnight:function(){var e=this[0].timepickerObj;return e.anytime2int(e._getTimeValue())},getTime:function(e){var t=this[0].timepickerObj,i=t._getTimeValue();if(!i)return null;var n=t.anytime2int(i);if(null===n)return null;e||(e=new Date);var a=new Date(e);return a.setHours(n/3600),a.setMinutes(n%3600/60),a.setSeconds(n%60),a.setMilliseconds(0),a},isVisible:function(){var e=this[0].timepickerObj;return!!(e&&e.list&&p.isVisible(e.list))},setTime:function(e){var t=this[0].timepickerObj,i=t.settings,n=t.anytime2int(e);if(t._isTimeRangeError(n,i)){var a=new CustomEvent("timeRangeError",l);t.targetEl.dispatchEvent(a)}if(i.forceRoundTime)var r=t._roundAndFormatTime(n);else r=t._int2time(n);return e&&null===r&&i.noneOption&&(r=e),t._setTimeValue(r,"initial"),t._formatValue({type:"change"},"initial"),t&&t.list&&t._setSelected(),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var t=e[0].timepickerObj,i=t.settings;return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-obj"),e.off(".timepicker"),t.list&&t.list.remove(),i.useSelect&&e.show(),t.list=null,this}}};function n(e){var n=e[0].timepickerObj,a=n.list,r=n.settings;a&&a.length&&(a.remove(),n.list=null);var s=t(v(n));if(a=r.useSelect?s:s.children("ul"),s.data("timepicker-input",e),n.list=s,r.useSelect)e.val()&&a.val(n._roundAndFormatTime(n.anytime2int(e.val()))),a.on("focus",(function(){t(this).data("timepicker-input").trigger("showTimepicker")})),a.on("blur",(function(){t(this).data("timepicker-input").trigger("hideTimepicker")})),a.on("change",(function(){n._setTimeValue(t(this).val(),"select")})),n._setTimeValue(a.val(),"initial"),e.hide().after(a);else{var o=r.appendTo;"string"==typeof o?o=t(o):"function"==typeof o&&(o=o(e)),o.append(s),n._setSelected(),a.on("mousedown click","li",(function(r){e.off("focus.timepicker"),e.on("focus.timepicker-ie-hack",(function(){e.off("focus.timepicker-ie-hack"),e.on("focus.timepicker",i.show)})),n._hideKeyboard()||e[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),t(this).addClass("ui-timepicker-selected"),n._selectValue()&&(e.trigger("hideTimepicker"),a.on("mouseup.timepicker click.timepicker","li",(function(e){a.off("mouseup.timepicker click.timepicker"),s.hide()})))}))}}function a(e){if("focus"!=e.type||e.target!=window){var i=t(e.target);i.closest(".ui-timepicker-input").length||i.closest(".ui-timepicker-wrapper").length||(p.hideAll(),t(document).off(".ui-timepicker"),t(window).off(".ui-timepicker"))}}function r(e){var n=t(this),a=n[0].timepickerObj,r=a.list;if(!r||!p.isVisible(r)){if(40!=e.keyCode)return!0;i.show.call(n.get(0)),r=a.list,a._hideKeyboard()||n.trigger("focus")}switch(e.keyCode){case 13:return a._selectValue()&&(a._formatValue({type:"change"}),a.hideMe()),e.preventDefault(),!1;case 38:var s=r.find(".ui-timepicker-selected");return s.length?s.is(":first-child")||(s.removeClass("ui-timepicker-selected"),s.prev().addClass("ui-timepicker-selected"),s.prev().position().top<s.outerHeight()&&r.scrollTop(r.scrollTop()-s.outerHeight())):(r.find("li").each((function(e,i){if(t(i).position().top>0)return s=t(i),!1})),s.addClass("ui-timepicker-selected")),!1;case 40:return 0===(s=r.find(".ui-timepicker-selected")).length?(r.find("li").each((function(e,i){if(t(i).position().top>0)return s=t(i),!1})),s.addClass("ui-timepicker-selected")):s.is(":last-child")||(s.removeClass("ui-timepicker-selected"),s.next().addClass("ui-timepicker-selected"),s.next().position().top+2*s.outerHeight()>r.outerHeight()&&r.scrollTop(r.scrollTop()+s.outerHeight())),!1;case 27:r.find("li").removeClass("ui-timepicker-selected"),a.hideMe();break;case 9:a.hideMe();break;default:return!0}}t.fn.timepicker=function(n){return this.length?i[n]?this.hasClass("ui-timepicker-input")?i[n].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!==e(n)&&n?void t.error("Method "+n+" does not exist on jQuery.timepicker"):i.init.apply(this,arguments):this},t.fn.timepicker.defaults=d},"object"===("undefined"==typeof exports?"undefined":e(exports))&&exports&&"object"===("undefined"==typeof module?"undefined":e(module))&&module&&module.exports===exports?u(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],u):u(jQuery)}();var infowindow,searchLocation,searchMarker,tsmlmap,bounds,locationIcon,searchIcon,markers=[];function createMap(e,t,i){tsml.debug&&console.log("createMap() locations",t),tsmlmap||(tsmlmap=L.map("map"),L.tileLayer("https://{s}s.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(tsmlmap)),bounds={north:!1,south:!1,east:!1,west:!1},locationIcon=window.btoa('<?xml version="1.0" encoding="utf-8"?><svg viewBox="-1.1 -1.086 43.182 63.273" xmlns="http://www.w3.org/2000/svg"><path fill="#f76458" stroke="#b3382c" stroke-width="3" d="M20.5,0.5 c11.046,0,20,8.656,20,19.333c0,10.677-12.059,21.939-20,38.667c-5.619-14.433-20-27.989-20-38.667C0.5,9.156,9.454,0.5,20.5,0.5z"/></svg>'),searchIcon=window.btoa('<?xml version="1.0" encoding="utf-8"?><svg viewBox="-1.1 -1.086 43.182 63.273" xmlns="http://www.w3.org/2000/svg"><path fill="#2c78b3" stroke="#2c52b3" stroke-width="3" d="M20.5,0.5 c11.046,0,20,8.656,20,19.333c0,10.677-12.059,21.939-20,38.667c-5.619-14.433-20-27.989-20-38.667C0.5,9.156,9.454,0.5,20.5,0.5z"/></svg>'),setMapMarkers(t,i)}function formatAddress(e,t){if(!e)return"";if(e=e.split(", "),t)return e[0];if("USA"==e[e.length-1]){e.pop();var i=e.pop();e[e.length-1]+=", "+i}return e.join("<br>")}function formatLink(e,t,i){if(!e)return t;if(location.search){for(var n=location.search.substr(1).split("&"),a=[],r=0;r<n.length;r++){var s=n[r].split("=");s[0]!=i&&(a[a.length]=s[0]+"="+s[1])}a.length&&(e+=(-1==e.indexOf("?")?"?":"&")+a.join("&"))}return'<a href="'+e+'">'+t+"</a>"}function removeSearchMarker(){searchLocation=null,"object"==typeof searchMarker&&searchMarker&&(searchMarker.setMap(null),searchMarker=null)}function setMapBounds(){markers.length>1?tsmlmap.fitBounds([[bounds.south,bounds.west],[bounds.north,bounds.east]],{padding:[10,10]}):1==markers.length&&(markers[0].getPopup()?(tsmlmap.setZoom(16),tsmlmap.panTo([bounds.north+.0025,bounds.east]),markers[0].togglePopup()):(tsmlmap.setZoom(16),tsmlmap.panTo([bounds.north,bounds.east])))}function setMapMarker(e,t,i){if(t.lat||t.lng){var n,a=document.createElement("div");a.className="marker",a.style.backgroundImage="url(data:image/svg+xml;base64,"+locationIcon+")",a.style.width="26px",a.style.height="38.4px";var r=L.divIcon({className:"marker",html:a,iconAnchor:[13,38.4],popupAnchor:[0,-22]});if(n=new L.marker(t,{icon:r}).addTo(tsmlmap),i){var s=new L.popup;s.setContent(i),n.bindPopup(s)}return n.addTo(tsmlmap),n}}function setMapMarkers(e,t){if(markers.length){for(var i=0;i<markers.length;i++)markers[i].remove();markers=[]}removeSearchMarker(),t&&(tsml.debug&&console.log("setMapMarker() searchLocation",t),setSearchMarker(t));var n="object"==typeof e?Object.keys(e).map((function(t){return e[t]})).sort((function(e,t){return t.latitude-e.latitude})):[];for(i=0;i<n.length;i++){var a,r=n[i];if(tsml.debug&&console.log("setMapMarkers() location",r),r.url&&r.formatted_address&&!r.approximate&&(a='<h3 class="notranslate">'+formatLink(r.url,r.name,"post_type")+'</h3><address class="notranslate">'+formatAddress(r.formatted_address)+"</address>",r.directions&&r.directions_url&&(a+='<a href="'+r.directions_url+'" class="btn btn-default btn-block"><svg class="icon" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.896 2.396a.5.5 0 0 0 0 .708l2.647 2.646-2.647 2.646a.5.5 0 1 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708 0z"/><path fill-rule="evenodd" d="M13.25 5.75a.5.5 0 0 0-.5-.5h-6.5a2.5 2.5 0 0 0-2.5 2.5v5.5a.5.5 0 0 0 1 0v-5.5a1.5 1.5 0 0 1 1.5-1.5h6.5a.5.5 0 0 0 .5-.5z"/></svg>'+r.directions+"</a>"),r.meetings&&r.meetings.length)){for(var s=null,o=0;o<r.meetings.length;o++){var l=r.meetings[o];s!=l.day&&(s&&(a+="</dl>"),s=l.day,void 0!==tsml.days[s]&&(a+="<h5>"+tsml.days[s]+"</h5>"),a+="<dl>"),a+="<dt>"+l.time+"</dt><dd>"+formatLink(l.url,l.name,"post_type")+"</dd>"}a+="</dl>"}var c={lat:parseFloat(r.latitude),lng:parseFloat(r.longitude)},u=setMapMarker(r.name,c,a);"object"==typeof u&&u&&((!bounds.north||c.lat>bounds.north)&&(bounds.north=c.lat),(!bounds.south||c.lat<bounds.south)&&(bounds.south=c.lat),(!bounds.east||c.lng>bounds.east)&&(bounds.east=c.lng),(!bounds.west||c.lng<bounds.west)&&(bounds.west=c.lng),"yes"===r.approximate&&u.remove()),tsml.debug&&console.log("setMapMarkers() marker",u),markers.push(u)}setMapBounds()}function setSearchMarker(e){if(removeSearchMarker(),e&&e.latitude){var t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(data:image/svg+xml;base64,"+searchIcon+")",t.style.width="26px",t.style.height="38.4px",marker=new L.marker([e.latitude,e.longitude],{icon:L.divIcon({className:"marker",html:t})}).addTo(tsmlmap)}}jQuery((function(e){e("div#tsml_import_progress").length&&(e("div#tsml_import_progress div.progress-bar").css({width:"5%"}),e("#tsml_import_errors").addClass("hidden"),function t(){e.getJSON(tsml.ajaxurl+"?action=tsml_import",(function(i){var n=e("body.tsml_meeting_page_import div#tsml_import_progress"),a=n.attr("data-total"),r=Math.floor((a-i.remaining)/a*95)+5+"%";n.find(".progress-bar").css({width:r}).text(r);for(var s=e("#tsml_counts"),o=["meetings","locations","groups","regions"],l=0;l<o.length;l++){var c=o[l];i.counts[c]>0&&(s.hasClass("hidden")&&s.removeClass("hidden"),$li=s.find("li."+c),$li.hasClass("hidden")&&$li.removeClass("hidden"),$li.text(i.descriptions[c]))}if(i.data_sources&&e.each(i.data_sources,(function(t,i){e('tr[data-source="'+t+'"] td.count_meetings').text(i.count_meetings)})),i.errors.length)for($errors=e("#tsml_import_errors"),$errors.hasClass("hidden")&&$errors.removeClass("hidden"),l=0;l<i.errors.length;l++)$errors.append(i.errors[l]);i.remaining&&t()})).fail((function(e,t,i){console.warn(t,i)}))}());const t=e("#filter_type");t.length&&t.on("change",(()=>{const e=t.val(),i=new URL(window.location);e?i.searchParams.set("filter_type",t.val()):i.searchParams.has("filter_type")&&i.searchParams.delete("filter_type"),window.location=i.toString()})),e("table form span").click((function(){const t=e(this).parents("[data-source]").find("[data-source-name]").text().trim();confirm(`Remove the ${t} feed?`)&&e(this).parent().submit()}));var i=e("input#post_type");if(i.length&&"tsml_meeting"==i.val()){var n=!0,a=e("form#post");a.errorMsg=e(".tsml-form-errors");var r={day:a.find("select#day"),time:a.find("input#time"),end_time:a.find("input#end_time"),types:a.find('input[name="types[]"]'),conference_url:a.find("input#conference_url"),conference_phone:a.find("input#conference_phone"),in_person:a.find("input[name=in_person]"),location:a.find("input#location"),location_notes:a.find("textarea[name=location_notes]"),formatted_address:a.find("input#formatted_address"),approximate:a.find("input#approximate"),latitude:a.find("input[name=latitude]"),longitude:a.find("input[name=longitude]"),group:a.find("input#group"),group_notes:a.find("textarea[name=group_notes]"),group_status:a.find('input[name="group_status"]'),region:a.find("select[name=region]"),district:a.find("select[name=district]"),website:a.find("input[name=website]"),email:a.find("input[name=email]"),phone:a.find("input[name=phone]"),contact_1_name:a.find("input[name=contact_1_name]"),contact_1_email:a.find("input[name=contact_1_email]"),contact_1_phone:a.find("input[name=contact_1_phone]"),contact_2_name:a.find("input[name=contact_2_name]"),contact_2_email:a.find("input[name=contact_2_email]"),contact_2_phone:a.find("input[name=contact_2_phone]"),contact_3_name:a.find("input[name=contact_3_name]"),contact_3_email:a.find("input[name=contact_3_email]"),contact_3_phone:a.find("input[name=contact_3_phone]"),mailing_address:a.find("input[name=mailing_address]"),venmo:a.find("input[name=venmo]"),square:a.find("input[name=square]"),paypal:a.find("input[name=paypal]"),homegroup_online:a.find("input[name=homegroup_online]"),last_contact:a.find("input[name=last_contact]")};e.fn.setState=function(t,i){const s=e(this);let o=null;if(s.siblings("[data-message]").removeClass("show"),s.removeClass("error warning"),-1===["warning","loading","error"].indexOf(t)&&(t=""),s.data("state",t),("error"===t||"warning"===t)&&(s.addClass(t),i)){let e=s.siblings("[data-message="+i+"]");e.addClass("show"),o=e[0]||null}return s[0].errorMsg=o,function(){const t=[],i=[];if(Object.values(r).forEach((e=>{const n=e.data("state"),a=e[0];"loading"===n&&t.push(a),"error"===n&&a.errorMsg&&i.push(a)})),n=!t.length&&!i.length,e("#publish").toggleClass("disabled",!n),a.errorMsg.toggle(!!i.length),i.length){const t=a.errorMsg.find("ul");t.html(""),i.forEach((i=>{if(i.errorMsg?.innerText){const n=e(`<li>\n                            <a href="#${i.id}">${i.errorMsg.innerText}</a>\n                        </li>`);t.append(n)}}))}}(),this},e.fn.clearState=function(){return e(this).setState()},a.submit((function(){return n})),e(".toggle_more").on("click","a",(function(t){t.preventDefault(),e(this).closest(".checkboxes").toggleClass("showing_more")})),r.day.on("change",(function(){e(this).val()?(r.time.removeAttr("disabled"),r.end_time.removeAttr("disabled"),r.time.val()||(r.time.val("00:00").timepicker(),r.end_time.val("01:00").timepicker())):(r.time.attr("data-value",r.time.val()).val("").attr("disabled","disabled"),r.end_time.attr("data-value",r.end_time.val()).val("").attr("disabled","disabled"))})),e("input.time").timepicker(),r.time.on("change",(function(){if(2===(t=e(this).val().split(":")).length){var t,i=t[0]-0;if(2===(t=t[1].split(" ")).length){var n=t[0],a=t[1];12==i?i=1:12==++i&&(a="am"==a?"pm":"am"),i+="",r.end_time.val(i+":"+n+" "+a)}}})),r.types.on("change",(function(){r.types.filter('[value="C"]').prop("checked")&&r.types.filter('[value="O"]').prop("checked")&&("C"==e(this).val()?r.types.filter('[value="O"]').prop("checked",!1):r.types.filter('[value="C"]').prop("checked",!1))})),e.getJSON(tsml.ajaxurl+"?action=tsml_locations",(function(t){r.location.autocomplete({source:t,minLength:1,select:function(t,i){var n=i.item;tsml.debug&&console.log("Location: ",n),r.formatted_address.val(n.formatted_address).trigger("change"),r.latitude.val(n.latitude),r.longitude.val(n.longitude),e("select[name=region] option[value="+n.region+"]").prop("selected",!0),r.location_notes.val(n.notes)}})})),e.getJSON(tsml.ajaxurl+"?action=tsml_groups",(function(e){r.group.autocomplete({source:e,minLength:1,select:function(e,t){var i=t.item;tsml.debug&&console.log("Selected: ",t),r.district.val(i.district),r.website.val(i.website),r.email.val(i.email),r.phone.val(i.phone),r.contact_1_name.val(i.contact_1_name),r.contact_1_email.val(i.contact_1_email),r.contact_1_phone.val(i.contact_1_phone),r.contact_2_name.val(i.contact_2_name),r.contact_2_email.val(i.contact_2_email),r.contact_2_phone.val(i.contact_2_phone),r.contact_3_name.val(i.contact_3_name),r.contact_3_email.val(i.contact_3_email),r.contact_3_phone.val(i.contact_3_phone),r.mailing_address.val(i.mailing_address),r.venmo.val(i.venmo),r.last_contact.val(i.last_contact),r.group_notes.val(i.notes)}})})),r.group_status.on("change",(function(){e("#contact-type").attr("data-type",e(this).val()),"meeting"==e(this).val()&&(r.group.val(""),r.group_notes.val(""),r.district.val(""),e(".apply_group_to_location").addClass("hidden"))})),r.group.on("change",(function(){e("div#group .apply_group_to_location").removeClass("hidden")})),r.formatted_address.on("change",(function(){r.formatted_address.setState("loading"),r.latitude.val(""),r.longitude.val("");var t=e(this).val().trim();if(!t.length)return createMap(!1),r.formatted_address.val(""),void(r.in_person.filter('[value="yes"]').prop("checked")?r.formatted_address.setState("error",1):r.formatted_address.setState("error",3));e.getJSON(tsml.ajaxurl,{action:"tsml_geocode",address:t,nonce:tsml.nonce},(function(t){if(console.log("Geocoded: ",t),"error"!=t.status){r.latitude.val(t.latitude),r.longitude.val(t.longitude),createMap(!1,{0:t});var i=!1;e("select#region option[selected]").length||e("select#region option").each((function(){var n=e(this).text().replace("&nbsp;","").trim();(t.city&&n==t.city||-1!=t.formatted_address.indexOf(n))&&(i=e(this).attr("value"))})),r.formatted_address.val(t.formatted_address).trigger("keyup"),r.approximate.val(t.approximate),e.getJSON(tsml.ajaxurl,{action:"tsml_address",formatted_address:t.formatted_address},(function(t){t&&(r.location.val(t.location),t.region!=r.region.val()&&(e("select[name=region] option").prop("selected",!1),e("select[name=region] option[value="+t.region+"]").prop("selected",!0)),r.location_notes.val(t.location_notes)),t&&t.region||e("select#region option[selected]").length||!i||e("select[name=region] option[value="+i+"]").prop("selected",!0),r.formatted_address.removeClass("error"),r.location.removeClass("warning"),r.formatted_address.removeClass("warning"),meeting_is_online=""!=r.conference_url.val()||""!=r.conference_phone.val(),"yes"==e("input[name=in_person]:checked").val()&&"yes"==r.approximate.val()?r.formatted_address.setState("error",1):"no"==e("input[name=in_person]:checked").val()&&"no"==r.approximate.val()&&meeting_is_online?r.formatted_address.setState("warning",4):r.formatted_address.clearState()}))}else r.formatted_address.setState("error",2)}))})).on("keyup",(function(){var t=e(this).attr("data-original-value");t!=e(this).val()&&r.formatted_address.setState("loading"),e("div.apply_address_to_location").length&&(t.length&&t!=e(this).val()?e("div.apply_address_to_location").removeClass("hidden"):e("div.apply_address_to_location").addClass("hidden"))})),r.in_person.on("change",(function(){r.formatted_address.trigger("change")})),r.conference_url.validate=function(){r.conference_url.clearState();var e=decodeURI(r.conference_url.val());if(e.match(/\bzoom\.us\b/i)){let t=e.match(/^(https?:\/\/)*([a-z0-9]+\.)*zoom\.us\/j\/(\d{8,20})(.*)$/i),i=e.match(/^(https?:\/\/)*([a-z0-9]+\.)*zoom\.us\/meeting\/register\/[a-z0-9\_]{10,}.*/i);if(!t&&!i)return void r.conference_url.setState("error",1);{let t=e.replace(/^(https?:\/\/)*([a-z0-9]+\.)*zoom\.us/,"https://zoom.us");t!==e&&(r.conference_url.val(t),r.conference_url.setState("warning",2))}}},tsml.tsml_debug&&(r.conference_url.on("change",r.conference_url.validate),r.conference_url.validate()),r.conference_phone.on("change",(function(){r.formatted_address.trigger("change")})),r.paypal.validate=function(){var e=r.paypal.val().trim();e&&!e.match(/^[a-z0-9]{1,20}$/i)?r.paypal.setState("error",1):r.paypal.clearState()},r.paypal.on("change",r.paypal.validate),r.paypal.validate(),r.homegroup_online.validate=function(){var e=r.homegroup_online.val().trim();e&&!e.match(/^[a-zA-Z0-9_-]*$/i)?r.homegroup_online.setState("error",1):r.homegroup_online.clearState()},r.homegroup_online.on("change",r.homegroup_online.validate),r.homegroup_online.validate(),e("#auto_draft").val()||r.formatted_address.trigger("change")}}));
