"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e,n){"function"==typeof define&&define.amd?define(["jquery"],function(i){return t(e,n,i)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t(e,n,require("jquery")):t(e,n,jQuery)}(function(t,e,n){var i=function(){function n(t){_classCallCheck(this,n),this.ctx=t}return _createClass(n,[{key:"log",value:function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",i=this.opt.log;this.opt.debug&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&"function"==typeof i[e]&&i[e]("mark.js: "+t)}},{key:"escapeStr",value:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(t){return t=this.escapeStr(t),Object.keys(this.opt.synonyms).length&&(t=this.createSynonymsRegExp(t)),this.opt.ignoreJoiners&&(t=this.setupIgnoreJoinersRegExp(t)),this.opt.diacritics&&(t=this.createDiacriticsRegExp(t)),t=this.createMergedBlanksRegExp(t),this.opt.ignoreJoiners&&(t=this.createIgnoreJoinersRegExp(t)),t=this.createAccuracyRegExp(t)}},{key:"createSynonymsRegExp",value:function(t){var e=this.opt.synonyms,n=this.opt.caseSensitive?"":"i";for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],s=this.escapeStr(i),a=this.escapeStr(r);t=t.replace(new RegExp("("+s+"|"+a+")","gm"+n),"("+s+"|"+a+")")}return t}},{key:"setupIgnoreJoinersRegExp",value:function(t){return t.replace(/[^(|)\\]/g,function(t,e,n){var i=n.charAt(e+1);return/[(|)\\]/.test(i)||""===i?t:t+"\0"})}},{key:"createIgnoreJoinersRegExp",value:function(t){return t.split("\0").join("[\\u00ad|\\u200b|\\u200c|\\u200d]?")}},{key:"createDiacriticsRegExp",value:function(t){var e=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáâãäåāąă","AÀÁÂÃÄÅĀĄĂ","cçćč","CÇĆČ","dđď","DĐĎ","eèéêëěēę","EÈÉÊËĚĒĘ","iìíîïī","IÌÍÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóôõöøō","OÒÓÔÕÖØŌ","rř","RŘ","sšśș","SŠŚȘ","tťț","TŤȚ","uùúûüůū","UÙÚÛÜŮŪ","yÿý","YŸÝ","zžżź","ZŽŻŹ"]:["aÀÁÂÃÄÅàáâãäåĀāąĄăĂ","cÇçćĆčČ","dđĐďĎ","eÈÉÊËèéêëěĚĒēęĘ","iÌÍÎÏìíîïĪī","lłŁ","nÑñňŇńŃ","oÒÓÔÕÖØòóôõöøŌō","rřŘ","sŠšśŚșȘ","tťŤțȚ","uÙÚÛÜùúûüůŮŪū","yŸÿýÝ","zŽžżŻźŹ"],i=[];return t.split("").forEach(function(r){n.every(function(n){if(n.indexOf(r)!==-1){if(i.indexOf(n)>-1)return!1;t=t.replace(new RegExp("["+n+"]","gm"+e),"["+n+"]"),i.push(n)}return!0})}),t}},{key:"createMergedBlanksRegExp",value:function(t){return t.replace(/[\s]+/gim,"[\\s]*")}},{key:"createAccuracyRegExp",value:function(t){var e=this,n=this.opt.accuracy,i="string"==typeof n?n:n.value,r="string"==typeof n?[]:n.limiters,s="";switch(r.forEach(function(t){s+="|"+e.escapeStr(t)}),i){case"partially":default:return"()("+t+")";case"complementary":return"()([^\\s"+s+"]*"+t+"[^\\s"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+t+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function(t){var e=this,n=[];return t.forEach(function(t){e.opt.separateWordSearch?t.split(" ").forEach(function(t){t.trim()&&n.indexOf(t)===-1&&n.push(t)}):t.trim()&&n.indexOf(t)===-1&&n.push(t)}),{keywords:n.sort(function(t,e){return e.length-t.length}),length:n.length}}},{key:"getTextNodes",value:function(t){var e=this,n="",i=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(t){i.push({start:n.length,end:(n+=t.textContent).length,node:t})},function(t){return e.matchesExclude(t.parentNode,!0)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){t({value:n,nodes:i})})}},{key:"matchesExclude",value:function(t,e){var n=this.opt.exclude.concat(["script","style","title","head","html"]);return e&&(n=n.concat(["*[data-markjs='true']"])),r.matches(t,n)}},{key:"wrapRangeInTextNode",value:function(t,n,i){var r=this.opt.element?this.opt.element:"mark",s=t.splitText(n),a=s.splitText(i-n),o=e.createElement(r);return o.setAttribute("data-markjs","true"),this.opt.className&&o.setAttribute("class",this.opt.className),o.textContent=s.textContent,s.parentNode.replaceChild(o,s),a}},{key:"wrapRangeInMappedTextNode",value:function(t,e,n,i,r){var s=this;t.nodes.every(function(a,o){var c=t.nodes[o+1];if("undefined"==typeof c||c.start>e){var u=function(){var c=e-a.start,u=(n>a.end?a.end:n)-a.start;if(i(a.node)){a.node=s.wrapRangeInTextNode(a.node,c,u);var l=t.value.substr(0,a.start),h=t.value.substr(u+a.start);if(t.value=l+h,t.nodes.forEach(function(e,n){n>=o&&(t.nodes[n].start>0&&n!==o&&(t.nodes[n].start-=u),t.nodes[n].end-=u)}),n-=u,r(a.node.previousSibling,a.start),!(n>a.end))return{v:!1};e=a.end}}();if("object"===("undefined"==typeof u?"undefined":_typeof(u)))return u.v}return!0})}},{key:"wrapMatches",value:function(t,e,n,i,r){var s=this,a=0===e?0:e+1;this.getTextNodes(function(e){e.nodes.forEach(function(e){e=e.node;for(var r=void 0;null!==(r=t.exec(e.textContent))&&""!==r[a];)if(n(r[a],e)){var o=r.index;if(0!==a)for(var c=1;c<a;c++)o+=r[c].length;e=s.wrapRangeInTextNode(e,o,o+r[a].length),i(e.previousSibling),t.lastIndex=0}}),r()})}},{key:"wrapMatchesAcrossElements",value:function(t,e,n,i,r){var s=this,a=0===e?0:e+1;this.getTextNodes(function(e){for(var o=void 0;null!==(o=t.exec(e.value))&&""!==o[a];){var c=o.index;if(0!==a)for(var u=1;u<a;u++)c+=o[u].length;var l=c+o[a].length;s.wrapRangeInMappedTextNode(e,c,l,function(t){return n(o[a],t)},function(e,n){t.lastIndex=n,i(e)})}r()})}},{key:"unwrapMatches",value:function(t){for(var n=t.parentNode,i=e.createDocumentFragment();t.firstChild;)i.appendChild(t.removeChild(t.firstChild));n.replaceChild(i,t),this.normalizeTextNode(n)}},{key:"normalizeTextNode",value:function(t){if(t){if(3===t.nodeType)for(;t.nextSibling&&3===t.nextSibling.nodeType;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else this.normalizeTextNode(t.firstChild);this.normalizeTextNode(t.nextSibling)}}},{key:"markRegExp",value:function(t,e){var n=this;this.opt=e,this.log('Searching with expression "'+t+'"');var i=0,r="wrapMatches",s=function(t){i++,n.opt.each(t)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](t,this.opt.ignoreGroups,function(t,e){return n.opt.filter(e,t,i)},s,function(){0===i&&n.opt.noMatch(t),n.opt.done(i)})}},{key:"mark",value:function(t,e){var n=this;this.opt=e;var i=0,r="wrapMatches",s=this.getSeparatedKeywords("string"==typeof t?[t]:t),a=s.keywords,o=s.length,c=this.opt.caseSensitive?"":"i",u=function l(t){var e=new RegExp(n.createRegExp(t),"gm"+c),s=0;n.log('Searching with expression "'+e+'"'),n[r](e,1,function(e,r){return n.opt.filter(r,t,i,s)},function(t){s++,i++,n.opt.each(t)},function(){0===s&&n.opt.noMatch(t),a[o-1]===t?n.opt.done(i):l(a[a.indexOf(t)+1])})};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===o?this.opt.done(i):u(a[0])}},{key:"unmark",value:function(t){var e=this;this.opt=t;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(t){e.unwrapMatches(t)},function(t){var i=r.matches(t,n),s=e.matchesExclude(t,!1);return!i||s?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=_extends({},{element:"",className:"",exclude:[],iframes:!1,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:t.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return this._iterator||(this._iterator=new r(this.ctx,this.opt.iframes,this.opt.exclude)),this._iterator}}]),n}(),r=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];_classCallCheck(this,t),this.ctx=e,this.iframes=n,this.exclude=i}return _createClass(t,[{key:"getContexts",value:function(){var t=void 0,e=[];return t="undefined"!=typeof this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:[this.ctx]:[],t.forEach(function(t){var n=e.filter(function(e){return e.contains(t)}).length>0;e.indexOf(t)!==-1||n||e.push(t)}),e}},{key:"getIframeContents",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=void 0;try{var r=t.contentWindow;if(i=r.document,!r||!i)throw new Error("iframe inaccessible")}catch(s){n()}i&&e(i)}},{key:"onIframeReady",value:function(t,e,n){var i=this;try{!function(){var r=t.contentWindow,s="about:blank",a="complete",o=function(){var e=t.getAttribute("src").trim(),n=r.location.href;return n===s&&e!==s&&e},c=function(){var r=function s(){try{o()||(t.removeEventListener("load",s),i.getIframeContents(t,e,n))}catch(r){n()}};t.addEventListener("load",r)};r.document.readyState===a?o()?c():i.getIframeContents(t,e,n):c()}()}catch(r){n()}}},{key:"waitForIframes",value:function(t,e){var n=this,i=0;this.forEachIframe(t,function(){return!0},function(t){i++,n.waitForIframes(t.querySelector("html"),function(){--i||e()})},function(t){t||e()})}},{key:"forEachIframe",value:function(e,n,i){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=e.querySelectorAll("iframe"),o=a.length,c=0;a=Array.prototype.slice.call(a);var u=function(){--o<=0&&s(c)};o||u(),a.forEach(function(e){t.matches(e,r.exclude)?u():r.onIframeReady(e,function(t){n(e)&&(c++,i(t)),u()},u)})}},{key:"createIterator",value:function(t,n,i){return e.createNodeIterator(t,n,i,!1)}},{key:"createInstanceOnIframe",value:function(e){return new t(e.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(t,e,n){var i=t.compareDocumentPosition(n),r=Node.DOCUMENT_POSITION_PRECEDING;if(i&r){if(null===e)return!0;var s=e.compareDocumentPosition(n),a=Node.DOCUMENT_POSITION_FOLLOWING;if(s&a)return!0}return!1}},{key:"getIteratorNode",value:function(t){var e=t.previousNode(),n=void 0;return n=null===e?t.nextNode():t.nextNode()&&t.nextNode(),{prevNode:e,node:n}}},{key:"checkIframeFilter",value:function(t,e,n,i){var r=!1,s=!1;return i.forEach(function(t,e){t.val===n&&(r=e,s=t.handled)}),this.compareNodeIframe(t,e,n)?(r!==!1||s?r===!1||s||(i[r].handled=!0):i.push({val:n,handled:!0}),!0):(r===!1&&i.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(t,e,n,i){var r=this;t.forEach(function(t){t.handled||r.getIframeContents(t.val,function(t){r.createInstanceOnIframe(t).forEachNode(e,n,i)})})}},{key:"iterateThroughNodes",value:function(t,e,n,i,r){for(var s=this,a=this.createIterator(e,t,i),o=[],c=void 0,u=void 0,l=function(){var t=s.getIteratorNode(a);return u=t.prevNode,c=t.node};l();)this.iframes&&this.forEachIframe(e,function(t){return s.checkIframeFilter(c,u,t,o)},function(e){s.createInstanceOnIframe(e).forEachNode(t,n,i)}),n(c);this.iframes&&this.handleOpenIframes(o,t,n,i),r()}},{key:"forEachNode",value:function(t,e,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=this.getContexts(),a=s.length;a||r(),s.forEach(function(s){var o=function(){i.iterateThroughNodes(t,s,e,n,function(){--a<=0&&r()})};i.iframes?i.waitForIframes(s,o):o()})}}],[{key:"matches",value:function(t,e){var n="string"==typeof e?[e]:e,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;if(i){var r=!1;return n.every(function(e){return!i.call(t,e)||(r=!0,!1)}),r}return!1}}]),t}();return n.fn.mark=function(t,e){return new i(this.get()).mark(t,e),this},n.fn.markRegExp=function(t,e){return new i(this.get()).markRegExp(t,e),this},n.fn.unmark=function(t){return new i(this.get()).unmark(t),this},n},window,document),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,a,o=this,c=arguments;return s=function(){i=null,n||(r=t.apply(o,c))},a=n&&!i,clearTimeout(i),i=setTimeout(s,e),a&&(r=t.apply(o,c)),r}},throttle:function(t,e){var n,i,r,s,a,o;return a=0,o=function(){a=new Date,r=null,s=t.apply(n,i)},function(){var c=new Date,u=e-(c-a);return n=this,i=arguments,u<=0?(clearTimeout(r),r=null,a=c,s=t.apply(n,i)):r||(r=setTimeout(o,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n="0.11.1",i=function(){function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function n(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function i(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var r=[];return e.each(n,function(n){r=r.concat(t(e.toStr(i[n])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||o,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}function a(t){var e,n,i=[],r=o.length;for(e=0;e<r;e++)(n=o.key(e)).match(t)&&i.push(n.replace(t,""));return i}var o;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(c){o=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,n,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),r(i()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=a(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=s(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&i()>n)}}),n}(),a=function(){function n(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):o}var i=0,s={},a=6,o=new r(10);return n.setMaxPendingRequests=function(t){a=t},n.resetCache=function(){o.reset()},e.mixin(n.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),l._cache.set(c,t)}function r(){e(!0)}function o(){i--,delete s[c],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var c,u,l=this;c=this._fingerprint(t),this.cancelled||c!==this.lastReq||((u=s[c])?u.done(n).fail(r):i<a?(i++,s[c]=this._send(t).done(n).fail(r).always(o)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,s;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(r=this._cache.get(s))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),o=window.SearchIndex=function(){function n(n){n=n||{},n.datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[c]=[],t[o]={},t}function s(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function a(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,a=e.length;n<s&&i<a;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var o="c",c="i";return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var s,a;n.datums[s=n.identify(t)]=t,a=i(n.datumTokenizer(t)),e.each(a,function(t){var e,i,a;for(e=n.trie,i=t.split("");a=i.shift();)e=e[o][a]||(e[o][a]=r()),e[c].push(s)})})},get:function(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function(t){var n,r,u=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,s;if(r&&0===r.length)return!1;for(e=u.trie,n=t.split("");e&&(i=n.shift());)e=e[o][i];return e&&0===n.length?(s=e[c].slice(0),void(r=r?a(r,s):s)):(r=[],!1)}),r?e.map(s(r),function(t){return u.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),c=function(){function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,r.transform(e))}var i,r=this;t&&(i=this.prepare(this._settings()),this.transport(i).fail(e).done(n))},clear:function(){return this.storage.clear(),this}}),t}(),u=function(){function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new a({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function n(t,n){e(t?[]:r.transform(n))}var i,r=this;if(e)return t=t||"",i=this.prepare(t,this._settings()),this.transport.get(i,n)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),l=function(){function i(i){var r;return i?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(r,i),!i.url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?o(i.transport):t.ajax,i):null}function r(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(i,n),!n.url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=a(n),n.transport=n.transport?o(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(t){function e(t,e){return e.url=s(e.url,t),e}function n(t,e){return e.url=e.url.replace(a,encodeURIComponent(t)),e}function i(t,e){return e}var r,s,a;return r=t.prepare,s=t.replace,a=t.wildcard,r?r:r=s?e:t.wildcard?n:i}function a(t){function n(t){return function(n){return e.debounce(n,t)}}function i(t){return function(n){return e.throttle(n,t)}}var r,s,a;return r=t.limiter,s=t.rateLimitBy,a=t.rateLimitWait,r||(r=/^throttle$/i.test(s)?i(a):n(a)),r}function o(n){return function(i){function r(t){e.defer(function(){a.resolve(t)})}function s(t){e.defer(function(){a.reject(t)})}var a=t.Deferred();return n(i,r,s),a}}return function(n){var s,a;return s={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},n=e.mixin(s,n||{}),!n.datumTokenizer&&t.error("datumTokenizer is required"),!n.queryTokenizer&&t.error("queryTokenizer is required"),a=n.sorter,n.sorter=a?function(t){return t.sort(a)}:e.identity,n.local=e.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=r(n.remote),n}}(),h=function(){function n(t){t=l(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new u(t.remote):null,this.prefetch=t.prefetch?new c(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=r),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function(){function t(t,e,i){return n.search(t,e,i)}function e(t,e){return n.search(t,e)}var n=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?n.reject():(r.add(e),r.prefetch.store(r.index.serialize()),void n.resolve())}var n,i,r=this;return n=t.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(e):n.resolve(),n.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){function r(t){var n=[];e.each(t,function(t){!e.some(s,function(e){return a.identify(t)===a.identify(e)})&&n.push(t)}),i&&i(n)}var s,a=this;return s=this.sorter(this.index.search(t)),n(this.remote?s.slice():s),this.remote&&s.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return a.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,a,o=this,c=arguments;return s=function(){i=null,n||(r=t.apply(o,c))},a=n&&!i,clearTimeout(i),i=setTimeout(s,e),a&&(r=t.apply(o,c)),r}},throttle:function(t,e){var n,i,r,s,a,o;return a=0,o=function(){a=new Date,r=null,s=t.apply(n,i)},function(){var c=new Date,u=e-(c-a);return n=this,i=arguments,u<=0?(clearTimeout(r),r=null,a=c,s=t.apply(n,i)):r||(r=setTimeout(o,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){function t(t){var a,o;return o=e.mixin({},s,t),a={css:r(),classes:o,html:n(o),selectors:i(o)},{css:a.css,html:a.html,classes:a.classes,selectors:a.selectors,mixin:function(t){e.mixin(t,a)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),i=function(){function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i,r;return i="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var r;return r=t.Event(i+e),(n=n||[]).unshift(r),this.$el.trigger.apply(this.$el,n),r},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),r=function(){function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(c),n=i?o(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(c);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,a;if(!this._callbacks)return this;for(t=t.split(c),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),a=s(n.async,this,[e].concat(i)),r()&&u(a);return this}function s(t,e,n){function i(){for(var i,r=0,s=t.length;!i&&r<s;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function a(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function o(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var c=/\s+/,u=a();return{onSync:n,onAsync:e,off:i,trigger:r}}(),s=function(t){function n(t,n,i){for(var r,s=[],a=0,o=t.length;a<o;a++)s.push(e.escapeRegExChars(t[a]));return r=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function s(e){var n,i,s;return(n=o.exec(e.data))&&(s=t.createElement(r.tagName),r.className&&(s.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),s.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(s,i)),!!n}function a(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:a(n,e)}var o;r=e.mixin({},i,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],o=n(r.pattern,r.caseSensitive,r.wordsOnly),a(r.node,s))}}(window.document),a=function(){function n(n,r){n=n||{},n.input||t.error("input is missing"),r.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function a(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){
this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=o[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!a(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!a(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;n=s(t,this.query),i=!!n&&this.query.length!==t.length,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,n,i,r,s=this;return t=e.bind(this._onBlur,this),n=e.bind(this._onFocus,this),i=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){o[t.which||t.keyCode]||e.defer(e.bind(s._onInput,s,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),o=function(){function n(n,r){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!o(n.name)&&t.error("invalid dataset name: "+n.name),r.mixin(this),this.highlight=!!n.highlight,this.name=n.name||u(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=a(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function n(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:n}function a(n,i){function r(e){return t("<div>").text(i(e))}return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||r}}function o(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var c,u;return c={val:"tt-selectable-display",obj:"tt-selectable-object"},u=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(c.obj)?{val:n.data(c.val)||"",obj:n.data(c.obj)||null}:null},e.mixin(n.prototype,r,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;n=this._getSuggestionsFragment(t,e),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var r,a=this;return r=document.createDocumentFragment(),e.each(i,function(e){var i,s;s=a._injectQuery(n,e),i=t(a.templates.suggestion(s)).data(c.obj,e).data(c.val,a.displayFn(e)).addClass(a.classes.suggestion+" "+a.classes.selectable),r.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:r,pattern:n}),t(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){function n(t){a||(a=!0,t=(t||[]).slice(0,r.limit),o=t.length,r._overwrite(e,t),o<r.limit&&r.async&&r.trigger("asyncRequested",e))}function i(n){n=n||[],!s&&o<r.limit&&(r.cancel=t.noop,o+=n.length,r._append(e,n.slice(0,r.limit-o)),r.async&&r.trigger("asyncReceived",e))}var r=this,s=!1,a=!1,o=0;this.cancel(),this.cancel=function(){s=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,n,i),!a&&n([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),n}(),c=function(){function n(n,i){function r(e){var n=s.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(s.$node),new o(e,i)}var s=this;n=n||{},n.node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,r)}return e.mixin(n.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,n=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,r=r<-1?e.length-1:r,r===-1?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?o.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function n(e){e.update(t)}var i=t!==this.query;return i&&(this.query=t,e.each(this.datasets,n)),i},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,n)}}),n}(),u=function(){function t(){c.apply(this,[].slice.call(arguments,0))}var n=c.prototype;return e.mixin(t.prototype,c.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),l=function(){function n(n,r){var s,a,o,c,u,l,h,d,f,p,m;n=n||{},n.input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),a=i(this,"deactivate","_onBlurred"),o=i(this,"isActive","isOpen","_onEnterKeyed"),c=i(this,"isActive","isOpen","_onTabKeyed"),u=i(this,"isActive","_onEscKeyed"),l=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),d=i(this,"isActive","isOpen","_onLeftKeyed"),f=i(this,"isActive","isOpen","_onRightKeyed"),p=i(this,"_openIfActive","_onQueryChanged"),m=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",a,this).onSync("enterKeyed",o,this).onSync("tabKeyed",c,this).onSync("escKeyed",u,this).onSync("upKeyed",l,this).onSync("downKeyed",h,this).onSync("leftKeyed",d,this).onSync("rightKeyed",f,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var r,s,a;r=document.activeElement,s=i.is(r),a=i.has(r).length>0,e.isMsie()&&(s||a)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,n,i,r,s,o,c;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=a.normalizeQuery(i),s=e.escapeRegExChars(r),o=new RegExp("^(?:"+s+")(.+$)","i"),c=o.exec(n.val),c&&this.input.setHint(i+c[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0)},autocomplete:function(t){var e,n,i;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),i=n&&e!==n.val,!(!i||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(t){var e,n,i,r,s;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,s=this._minLengthMet()&&this.menu.update(e),!s&&!this.eventBus.before("cursorchange",r)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){function r(e,n){e.each(function(){var e,i=t(this);(e=i.data(m.typeahead))&&n(e,i)})}function s(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(t,e){t.data(m.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var n,i;n=t.data(m.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(m.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function f(n){var i,r;return i=e.isJQuery(n)||e.isElement(n),r=i?t(n).first():[],r.length?r:null}var p,m,g;p=t.fn.typeahead,m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function(r,h){function d(){var n,d,g,y,v,_,b,x,w,C,k;e.each(h,function(t){t.highlight=!!r.highlight}),n=t(this),d=t(p.html.wrapper),g=f(r.hint),y=f(r.menu),v=r.hint!==!1&&!g,_=r.menu!==!1&&!y,v&&(g=s(n,p)),_&&(y=t(p.html.menu).css(p.css.menu)),g&&g.val(""),n=o(n,p),(v||_)&&(d.css(p.css.wrapper),n.css(v?p.css.input:p.css.inputWithNoHint),n.wrap(d).parent().prepend(v?g:null).append(_?y:null)),k=_?u:c,b=new i({el:n}),x=new a({hint:g,input:n},p),w=new k({node:y,datasets:h},p),C=new l({input:x,menu:w,eventBus:b,minLength:r.minLength},p),n.data(m.www,p),n.data(m.typeahead,C)}var p;return h=e.isArray(h)?h:[].slice.call(arguments,1),r=r||{},p=n(r.classNames),this.each(d)},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.select(i)}),n},autocomplete:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function(t){var e=!1;return r(this.first(),function(n){e=n.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=p,this}}()}),jQuery(function(t){function e(){var e={action:"meetings",query:C.val().trim(),mode:t("#search li.active a").attr("data-id"),region:t("#region li.active a").attr("data-id"),day:t("#day li.active a").attr("data-id"),time:t("#time li.active a").attr("data-id"),type:t("#type li.active a").attr("data-id"),distance:t("#distance li.active a").attr("data-id"),view:t("#meetings .toggle-view.active").attr("data-id")},n={};if(n["tsml-day"]=e.day?e.day:"any","search"!=e.mode&&e.distance!=myAjax.defaults.distance&&(n["tsml-distance"]=e.distance),e.mode&&e.mode!=myAjax.defaults.mode&&(n["tsml-mode"]=e.mode),e.query&&e.query!=myAjax.defaults.query&&(n["tsml-query"]=e.query),"search"==e.mode&&e.region!=myAjax.defaults.region&&(n["tsml-region"]=e.region),e.time&&e.time!=myAjax.defaults.time&&(n["tsml-time"]=e.time),e.type&&e.type!=myAjax.defaults.type&&(n["tsml-type"]=e.type),e.view!=myAjax.defaults.view&&(n["tsml-view"]=e.view),n=t.param(n),history.pushState){var i=window.location.protocol+"//"+window.location.host+window.location.pathname;n.length&&(i=i+"?"+n),location.search.indexOf("post_type=meetings")>-1&&(i=i+(i.indexOf("?")>-1?"&":"?")+"post_type=meetings"),window.history.pushState({path:i},"",i)}t("#meetings").attr("data-mode",e.mode),"search"==e.mode?(p(),u(),r(e)):"location"==e.mode?(f(),e.query?(t("#search button i").removeClass().addClass("glyphicon glyphicon-refresh spinning"),t.getJSON("https://maps.googleapis.com/maps/api/geocode/json",{address:e.query,key:myAjax.google_api_key},function(n){t("#search button i").removeClass().addClass("glyphicon glyphicon-map-marker"),"OK"==n.status?(C.val(n.results[0].formatted_address),e.latitude=n.results[0].geometry.location.lat,e.longitude=n.results[0].geometry.location.lng,e.query="",u(e),r(e)):(u(),a("loc_error"))})):a("loc_empty")):"me"==e.mode&&(t("#search button i").removeClass().addClass("glyphicon glyphicon-refresh spinning"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){t("#search button i").removeClass().addClass("glyphicon glyphicon-user"),e.latitude=n.coords.latitude,e.longitude=n.coords.longitude,u(e),r(e)},function(){t("#search button i").removeClass().addClass("glyphicon glyphicon-user"),u(),a("geo_error")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e5}):(t("#search button i").removeClass().addClass("glyphicon glyphicon-user"),u(),a("geo_error_browser")))}function n(t,e){if(t=t.split(", "),e)return t[0];if("USA"==t[t.length-1]){t.pop();var n=t.pop();t[t.length-1]+=", "+n}return t.join("<br>")}function i(t,e,n){if(location.search){for(var i=location.search.substr(1).split("&"),r=[],s=0;s<i.length;s++){var a=i[s].split("=");a[0]!=n&&(r[r.length]=a[0]+"="+a[1])}r.length&&(t+=(t.indexOf("?")==-1?"?":"&")+r.join("&"))}return'<a href="'+t+'">'+e+"</a>"}function r(r){r.distance_units=myAjax.distance_units,t.post(myAjax.ajaxurl,r,function(u){if(u.length){t("#meetings").removeClass("empty"),"map"==t("#meetings").attr("data-view")&&google.maps.event.trigger(_,"resize"),a(),locations=[];var h=t("#meetings_tbody").html("");t.each(u,function(e,a){t.inArray("M",a.types)!=-1?a.name+=" <small>"+myAjax.strings.men+"</small>":t.inArray("W",a.types)!=-1&&(a.name+=" <small>"+myAjax.strings.women+"</small>"),locations[a.location_id]||(locations[a.location_id]={name:a.location,formatted_address:a.formatted_address,latitude:a.latitude,longitude:a.longitude,url:a.location_url,meetings:[]}),locations[a.location_id].meetings[locations[a.location_id].meetings.length]={name:a.name,time:a.time_formatted,day:a.day,notes:a.notes,url:a.url};for(var o=a.day+"-"+("00:00"==a.time?"23:59":a.time),c=0;c<a.types.length;c++)a.types[c]=myAjax.types[a.types[c]];a.types.sort(),a.types=a.types.join(", "),h.append('<tr><td class="time" data-sort="'+o+"-"+s(a.location)+'"><span>'+(r.day||!a.day?a.time_formatted:myAjax.days[a.day]+"</span><span>"+a.time_formatted)+'</span></td><td class="distance" data-sort="'+a.distance+'">'+a.distance+" "+myAjax.distance_units+'</td><td class="name" data-sort="'+s(a.name)+"-"+o+'">'+i(a.url,a.name,"post_type")+'</td><td class="location" data-sort="'+s(a.location)+"-"+o+'">'+a.location+'</td><td class="address" data-sort="'+s(a.formatted_address)+"-"+o+'">'+n(a.formatted_address,myAjax.street_only)+'</td><td class="region" data-sort="'+s(a.sub_region||a.region||"")+"-"+o+'">'+(a.sub_region||a.region||"")+'</td><td class="types" data-sort="'+s(a.types)+"-"+o+'">'+a.types+"</td></tr>")}),l(),"search"==r.mode&&r.query&&t("#meetings .results tbody").mark(r.mode);for(var d=0;d<v.length;d++)v[d].setMap(null);v=[],b=new google.maps.LatLngBounds,"object"==typeof g&&g&&b.extend(g.position),c(),o()}else{if(r.mode&&("undefined"!=typeof r.day||"undefined"!=typeof r.region||"undefined"!=typeof r.time||"undefined"!=typeof r.type))return t("#day li").removeClass("active").first().addClass("active"),t("#time li").removeClass("active").first().addClass("active"),t("#region li").removeClass("active").first().addClass("active"),t("#type li").removeClass("active").first().addClass("active"),t("#day span.selected").html(t("#day li:first-child a").html()),t("#time span.selected").html(t("#time li:first-child a").html()),t("#region span.selected").html(t("#region li:first-child a").html()),t("#type span.selected").html(t("#type li:first-child a").html()),e();t("#meetings").addClass("empty"),a("no_meetings")}},"json")}function s(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",n="aaaaeeeeiiiioooouuuunc------",i=0,r=e.length;i<r;i++)t=t.replace(new RegExp(e.charAt(i),"g"),n.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function a(e){"undefined"==typeof e?t("#alert").html("").addClass("hidden"):t("#alert").html(myAjax.strings[e]).removeClass("hidden")}function o(){v.length>1?_.fitBounds(b):1==v.length?(_.setCenter(b.getCenter()),"map"==E&&google.maps.event.trigger(v[0],"click"),_.setZoom(14)):0==v.length}function c(){for(var t in locations)if(locations.hasOwnProperty(t)){var e=locations[t],r=new google.maps.Marker({position:{lat:e.latitude-0,lng:e.longitude-0},map:_,title:e.name,icon:w});r.content='<div class="infowindow"><h3>'+i(e.url,e.name,"post_type")+"</h3><address>"+n(e.formatted_address)+"</address>";for(var s=null,a=0;a<e.meetings.length;a++){var o=e.meetings[a];s!=o.day&&(s&&(r.content+="</dl>"),s=o.day,"undefined"!=typeof myAjax.days[s]&&(r.content+="<h5>"+myAjax.days[s]+"</h5>"),r.content+="<dl>"),r.content+="<dt>"+o.time+"</dt><dd>"+i(o.url,o.name,"post_type")+"</dd>"}r.content+="</dl></div>",google.maps.event.addListener(r,"click",function(t){return function(){y.setContent(t.content),y.open(_,t)}}(r)),b.extend(r.position),v[v.length]=r}}function u(t){"object"==typeof g&&g&&(g.setMap(null),g=null),"object"==typeof t&&(g=new google.maps.Marker({icon:x,position:new google.maps.LatLng(t.latitude,t.longitude),map:_}))}function l(){for(var e=t("#meetings table thead th[data-sort]").first(),n=(e.attr("class"),e.attr("data-sort")),i=document.getElementById("meetings_tbody"),r=[],s=t("#meetings table thead th").index(e),a=0,o=i.rows.length;a<o;a++){var c=i.rows[a];r.push([c.cells[s].getAttribute("data-sort"),c])}r.sort(function(t,e){return t[0]>e[0]?"asc"==n?1:-1:t[0]<e[0]?"asc"==n?-1:1:0});for(var a=0,o=r.length;a<o;a++)i.appendChild(r[a][1])}function h(){var e=(new Date).getDay(),n=t("#day li.active a").first().attr("data-id"),i=t("#time li.active a").first().attr("data-id");e!=n?(t("#time li.upcoming").addClass("hidden"),"upcoming"==i&&(t("#time li.active").removeClass("active"),t("#time li").first().addClass("active"),t("#time span.selected").html(t("#time li a").first().text()))):t("#time li.upcoming").removeClass("hidden")}function d(){var e="";t("#meetings #day li.active").index()&&(e+=t("#meetings #day span.selected").text()),t("#meetings #time li.active").index()&&(e+=" "+t("#meetings #time span.selected").text()),t("#meetings #type li.active").index()&&(e+=" "+t("#meetings #type span.selected").text()),e+=" Meetings",t("#meetings #region li.active").index()&&(e+=" in "+t("#meetings #region span.selected").text()),document.title=e}function f(){t('#meetings #search input[name="query"]').typeahead("destroy")}function p(){t('#meetings #search input[name="query"]').typeahead({highlight:!0},{name:"tsml_regions",display:"value",source:k,templates:{header:"<h3>"+myAjax.strings.regions+"</h3>"}},{name:"tsml_groups",display:"value",source:S,templates:{header:"<h3>"+myAjax.strings.groups+"</h3>"}},{name:"tsml_locations",display:"value",source:A,templates:{header:"<h3>"+myAjax.strings.locations+"</h3>"}}).on("typeahead:selected",function(n,i){if("region"==i.type){t("#region li").removeClass("active");var r=t('#region li a[data-id="'+i.id+'"]');r.parent().addClass("active"),t("#region span.selected").html(r.html()),t('#search input[name="query"]').val("").typeahead("val",""),e()}else"location"==i.type?location.href=i.url:"group"==i.type&&e()})}function m(t,e,n){n||(n=window.location.href);var i,r=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(r.test(n))return"undefined"!=typeof e&&null!==e?n.replace(r,"$1"+t+"="+e+"$2$3"):(i=n.split("#"),n=i[0].replace(r,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof i[1]&&null!==i[1]&&(n+="#"+i[1]),n);if("undefined"!=typeof e&&null!==e){var s=n.indexOf("?")!==-1?"&":"?";return i=n.split("#"),n=i[0]+s+t+"="+e,"undefined"!=typeof i[1]&&null!==i[1]&&(n+="#"+i[1]),n}return n}t("body").hasClass("post-type-archive-meetings")&&d(),h();var g,y=new google.maps.InfoWindow,v=[],_=new google.maps.Map(document.getElementById("map"),{disableDefaultUI:!0,scrollwheel:!1,streetViewControl:!0,zoomControl:!0,fullscreenControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}}),b=new google.maps.LatLngBounds,x={path:"M20.5,0.5 c11.046,0,20,8.656,20,19.333c0,10.677-12.059,21.939-20,38.667c-5.619-14.433-20-27.989-20-38.667C0.5,9.156,9.454,0.5,20.5,0.5z",fillColor:"#2c78b3",fillOpacity:1,anchor:new google.maps.Point(40,50),strokeWeight:2,strokeColor:"#2c52b3",scale:.6},w={path:"M20.5,0.5 c11.046,0,20,8.656,20,19.333c0,10.677-12.059,21.939-20,38.667c-5.619-14.433-20-27.989-20-38.667C0.5,9.156,9.454,0.5,20.5,0.5z",fillColor:"#f76458",fillOpacity:1,anchor:new google.maps.Point(40,50),strokeWeight:2,strokeColor:"#b3382c",scale:.6},C=t("#meetings #search input[name=query]");C.size()&&C.val().length&&t("#meetings .results tbody").mark(C.val());var k=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_regions",cache:!1}}),S=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_groups",cache:!1}}),A=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:myAjax.ajaxurl+"?action=tsml_locations",cache:!1}}),E=t("#search li.active a").attr("data-id");"search"==E?(p(),c(),o()):"location"==E&&C.val().length?e():"me"==E&&e(),t("#meeting #feedback").on("click",'a[href="#feedback"]',function(e){e.preventDefault(),t(this).closest("#feedback").toggleClass("form")}).on("click",'a[href="#cancel"]',function(e){e.preventDefault(),t(this).closest("#feedback").toggleClass("form")}).find("form").validate({onfocusout:!1,onkeyup:function(t){},highlight:function(e,n,i){t(e).closest("div.form-group").addClass("has-error")},unhighlight:function(e,n,i){t(e).closest("div.form-group").removeClass("has-error")},errorPlacement:function(t,e){},submitHandler:function(e){var n=t(e),i=n.closest("#feedback"),r=i.find(".alert").first();return t.post(myAjax.ajaxurl,n.serialize(),function(t){r.removeClass("alert-danger").addClass("alert-warning").html(t),i.attr("class","confirm")}).fail(function(t){r.removeClass("alert-warning").addClass("alert-danger").html(myAjax.strings.email_not_sent),i.attr("class","confirm")}),!1}}),t("#meetings table thead").on("click","th",function(){var e,n=t(this).attr("class");e=t(this).attr("data-sort")&&"asc"==t(this).attr("data-sort")?"desc":"asc",t("#meetings table thead th").removeAttr("data-sort"),t("#meetings table thead th."+n).attr("data-sort",e),l()}),t("#meetings .controls").on("submit","#search",function(){return e(),!1}).on("click","div.expand",function(e){
e.preventDefault(),e.stopPropagation(),t(this).next("ul.children").toggleClass("expanded"),t(this).toggleClass("expanded")}).on("click",".dropdown-menu a",function(){var n=t(this).closest("div").attr("id");"mode"==n?(t("#mode li").removeClass("active"),t("#meetings").addClass("empty"),"search"==t(this).attr("data-id")?(C.prop("disabled",!1),t("#search button i").removeClass().addClass("glyphicon glyphicon-search")):"location"==t(this).attr("data-id")?(C.prop("disabled",!1),t("#search button i").removeClass().addClass("glyphicon glyphicon-map-marker"),a("loc_thinking")):"me"==t(this).attr("data-id")&&(C.prop("disabled",!0),t("#search button i").removeClass().addClass("glyphicon glyphicon-user"),a("geo_thinking")),C.attr("placeholder",t(this).text()),C.val("").focus()):"distance"==n?(t("#distance li").removeClass("active"),t("#distance span.selected").html(t(this).html())):"region"==n?(t("#region li").removeClass("active"),t("#region span.selected").html(t(this).html())):"day"==n?(t("#day li").removeClass("active"),t("#day span.selected").html(t(this).html())):"time"==n?(t("#time li").removeClass("active"),t("#time span.selected").html(t(this).html())):"type"==n&&(t("#type li").removeClass("active"),t("#type span.selected").html(t(this).html())),t(this).parent().toggleClass("active"),h(),d(),e()}),t("#meetings #action .toggle-view").click(function(){var e=t(this).attr("data-id"),n=t("#meetings").attr("data-view");if(e!=n){if(t("#meetings #action .toggle-view").toggleClass("active"),t("#meetings").attr("data-view",e),history.pushState){if(e==myAjax.defaults.view)var i=m("tsml-view");else var i=m("tsml-view",e);window.history.pushState({path:i},"",i)}"map"==e&&"list"==n&&(google.maps.event.trigger(_,"resize"),o(),setTimeout(function(){t("body").click()},100))}}),t(window).resize(function(e){if(t("#meetings").hasClass("tsml_fullscreen")){var n=_.getCenter(),i=t(window).height()-79;t("body").hasClass("admin-bar")&&(i-=32),t("#map").css("height",i),google.maps.event.trigger(_,"resize"),_.setCenter(n)}})});